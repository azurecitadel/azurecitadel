{{/* Mermaid diagram shortcode */}}
{{ $id := .Get "id" | default (printf "mermaid-%d" now.Unix) }}
{{ $class := .Get "class" | default "mermaid-diagram" }}
{{ $title := .Get "title" }}

<div class="mermaid-container" style="text-align: center; margin: 1.5rem 0;">
  {{ if $title }}
  <h4 style="margin-bottom: 0.5rem;">{{ $title }}</h4>
  {{ end }}
  <div class="mermaid {{ $class }}" id="{{ $id }}">
{{ .Inner | safeHTML }}
  </div>
</div>

<style>
.mermaid-container {
  background: var(--color-canvas-subtle);
  border: 1px solid var(--color-border-default);
  border-radius: 6px;
  padding: 1rem;
  overflow-x: auto;
}

.mermaid {
  display: flex;
  justify-content: center;
  align-items: center;
  min-height: 200px;
}

/* Dark mode adjustments */
[data-color-mode="dark"] .mermaid-container {
  background: var(--color-canvas-default);
}

/* Responsive adjustments */
@media (max-width: 768px) {
  .mermaid-container {
    padding: 0.5rem;
    margin: 1rem 0;
  }

  .mermaid svg {
    max-width: 100%;
    height: auto;
  }
}
</style>